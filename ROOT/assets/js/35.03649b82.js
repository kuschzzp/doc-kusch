(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{600:function(s,e,t){"use strict";t.r(e);var n=t(9),a=Object(n.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"docker安装jenkins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker安装jenkins"}},[s._v("#")]),s._v(" Docker安装Jenkins")]),s._v(" "),t("h2",{attrs:{id:"一-docker安装jenkins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-docker安装jenkins"}},[s._v("#")]),s._v(" 一. Docker安装Jenkins")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("拉取镜像安装")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker pull jenkins/jenkins:lts\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[t("strong",[s._v("启动之前去建立一个Jenkins本地挂载目录,并且赋予容器里面的用户访问权限")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /usr/local/jenkins\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/jenkins\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" jenkins_home\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" /usr/local/jenkins/jenkins_home\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[t("strong",[s._v("运行Jenkins")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker run -d -v /usr/local/jenkins/jenkins_home:/var/jenkins_home -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5418")]),s._v(":8080 -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50000")]),s._v(":50000 jenkins/jenkins:lts\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("补充")]),s._v(" "),t("p",[s._v("docker常用运行参数含义:"),t("br"),s._v(" "),t("code",[s._v("-d, --detach=false")]),s._v(" 指定容器运行于前台还是后台，默认为false"),t("br"),s._v(" "),t("code",[s._v("-i, --interactive=false")]),s._v(" 打开STDIN，用于控制台交互"),t("br"),s._v(" "),t("code",[s._v("-t, --tty=false")]),s._v(" 分配tty设备，该可以支持终端登录，默认为false"),t("br"),s._v(" "),t("code",[s._v('-u, --user=""')]),s._v(" 指定容器的用户"),t("br"),s._v(" "),t("code",[s._v("-a, --attach=[]")]),s._v(" 登录容器（必须是以docker run -d启动的容器）"),t("br"),s._v(" "),t("code",[s._v('-w, --workdir=""')]),s._v(" 指定容器的工作目录"),t("br"),s._v(" "),t("code",[s._v("-c, --cpu-shares=0")]),s._v(" 设置容器CPU权重，在CPU共享场景使用"),t("br"),s._v(" "),t("code",[s._v("-e, --env=[]")]),s._v(" 指定环境变量，容器中可以使用该环境变量"),t("br"),s._v(" "),t("code",[s._v('-m, --memory=""')]),s._v(" 指定容器的内存上限"),t("br"),s._v(" "),t("code",[s._v("-P, --publish-all=false")]),s._v(" 指定容器暴露的端口"),t("br"),s._v(" "),t("code",[s._v("-p, --publish=[]")]),s._v(" 指定容器暴露的端口"),t("br"),s._v(" "),t("code",[s._v('-h, --hostname=""')]),s._v(" 指定容器的主机名"),t("br"),s._v(" "),t("code",[s._v("-v, --volume=[]")]),s._v(" 给容器挂载存储卷，挂载到容器的某个目录"),t("br"),s._v(" "),t("code",[s._v('--restart="no"')]),s._v(" 指定容器停止后的重启策略:"),t("br"),s._v(" "),t("code",[s._v("no：容器退出时不重启 on-failure：容器故障退出（返回值非零）时重启 always：容器退出时总是重启")])])]),s._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[t("strong",[s._v("运行完成之后查看初始密码")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 找到你的Jenkins对应的CONTAINER ID")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" 你的Id "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /var/jenkins_home/secrets/initialAdminPassword "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#保存一下,下面会用到")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[t("strong",[s._v("访问你的服务器或者虚拟机的"),t("code",[s._v("IP+端口号")]),s._v("（端口号是上面运行时的"),t("code",[s._v("5418")]),s._v("，你可以随意修改，但是记得放行端口！）")])])]),s._v(" "),t("h2",{attrs:{id:"二-设置jenkins和安装常用的插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-设置jenkins和安装常用的插件"}},[s._v("#")]),s._v(" 二. 设置Jenkins和安装常用的插件")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("在输入框中输入你上面保存的密码。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("选择安装推荐插件(失败也没关系，继续，后面会去下载需要的插件的)。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("之后设置用户名密码，然后一路顺风，直到进入主页面。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("下面去修改一下Jenkins的插件下载地址，防止等待一万年(方法如下)。")])])])]),s._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[s._v("点击查看")]),s._v(" "),t("ul",[t("li",[s._v("在左侧找到"),t("code",[s._v("Manage Jenkins")]),s._v(" "),t("img",{attrs:{src:"http://cdn.gulei.love/docs/jenkins1.png",alt:"图片1"}})]),s._v(" "),t("li",[s._v("在右侧找到"),t("code",[s._v("Manage Plugins")]),t("br"),s._v(" "),t("img",{attrs:{src:"http://cdn.gulei.love/docs/jenkins2.png",alt:"图片2"}})]),s._v(" "),t("li",[s._v("点击高级")]),s._v(" "),t("li",[s._v("将最下方的连接修改为"),t("code",[s._v("https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json")]),t("br"),s._v(" "),t("img",{attrs:{src:"http://cdn.gulei.love/docs/jenkins3.png",alt:"图片3"}})]),s._v(" "),t("li",[s._v("最后提交,等一会就行了。")])])]),s._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[t("strong",[s._v("下载所需插件")])])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("重启小提示")]),s._v(" "),t("p",[s._v("重启Jenkins方式: 访问"),t("code",[s._v("ip+端口/restart")]),s._v(" 点确定即可。")])]),s._v(" "),t("p",[s._v("此处以部署一个最简单的springboot项目为例：")]),s._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[s._v("点击查看")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("安装所需工具"),t("br"),s._v("\n在插件中搜索"),t("code",[s._v("Maven Integration")]),s._v("安装"),t("br"),s._v("\n在插件中搜索"),t("code",[s._v("Gitee")]),s._v("安装即可")])]),s._v(" "),t("li",[t("ol",[t("li",[s._v("如图找到全局工具配置\n"),t("img",{attrs:{src:"http://cdn.gulei.love/docs/jenkins4.png",alt:"图片4"}})])])]),s._v(" "),t("li",[t("ol",{attrs:{start:"2"}},[t("li",[s._v("如下图所示自动安装Maven和JDK"),t("br"),s._v("\n如果安装JDK时要输入Oracle账户:"),t("code",[s._v("2696671285@qq.com")]),s._v(","),t("code",[s._v("Oracle123")]),t("br"),s._v(" "),t("img",{attrs:{src:"http://cdn.gulei.love/docs/jenkins6.png",alt:"图片6"}}),s._v(" "),t("img",{attrs:{src:"http://cdn.gulei.love/docs/jenkins5.png",alt:"图片5"}})])])])])])])}),[],!1,null,null,null);e.default=a.exports}}]);