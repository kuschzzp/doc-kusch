(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{511:function(s,a,e){"use strict";e.r(a);var t=e(10),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"es"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#es"}},[s._v("#")]),s._v(" ES")]),s._v(" "),e("p",[s._v("拉取镜像")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker pull elasticsearch:7.9.3\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("单节点运行，并设置内存大小，防止小内存服务器直接爆了")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker run -d --name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("es -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9200")]),s._v(":9200 -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9300")]),s._v(":9300 -e "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovery.type=single-node"')]),s._v(" -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ES_JAVA_OPTS")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Xms128m -Xmx1024m"')]),s._v("  elasticsearch:7.9.3\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("9300是多节点时通信用")])]),s._v(" "),e("p",[s._v("进入容器做一些配置 （可选吧，我不配置它确实是是没出现问题。）")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入es容器内容")]),s._v("\ndocker "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it es /bin/bash\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改es配置文件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /usr/share/elasticsearch/config/elasticsearch.yml\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#添加以下配置（允许跨域）")]),s._v("\nhttp.cors.enabled: "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nhttp.cors.allow-origin: "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 最后重启即可")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h2",{attrs:{id:"kibana"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kibana"}},[s._v("#")]),s._v(" Kibana")]),s._v(" "),e("p",[s._v("拉取镜像")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker pull kibana:7.9.3\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("运行")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker run -d --name kibana -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5601")]),s._v(":5601 kibana:7.9.3\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("进入容器，修改配置，kibana中文、es地址等配置")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 首先查看ES容器内部IP是多少，等会要去填的")]),s._v("\ndocker inspect -f "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'")]),s._v(" es\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入kibana容器")]),s._v("\ndocker "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it kibana /bin/bash\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑kibana配置文件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /usr/share/kibana/conf/kibana.yml\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改以下点：")]),s._v("\ni18n.locale: "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh-CN"')]),s._v("\nelasticsearch.hosts: "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://你刚才查的ip:9200"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 最后重启即可")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h2",{attrs:{id:"安装ik分词器插件、ingest-attachment-插件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装ik分词器插件、ingest-attachment-插件"}},[s._v("#")]),s._v(" 安装IK分词器插件、Ingest Attachment 插件")]),s._v(" "),e("p",[e("a",{attrs:{href:"http://cdn.gulei.love/docs/ingest-attachment-7.9.3.zip",target:"_blank",rel:"noopener noreferrer"}},[s._v("ingest-attachment-7.9.3.zip----右键复制链接下载"),e("OutboundLink")],1)]),s._v(" "),e("p",[e("a",{attrs:{href:"http://cdn.gulei.love/docs/elasticsearch-analysis-ik-7.9.3.zip",target:"_blank",rel:"noopener noreferrer"}},[s._v("elasticsearch-analysis-ik-7.9.3.zip----右键复制链接下载"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("下载好了放到服务器上，然后拷贝到容器当中去")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" elasticsearch-analysis-ik-7.9.3.zip es:/opt/\ndocker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" ingest-attachment-7.9.3.zip  es:/opt/\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 命令格式：docker cp 你的文件  容器:容器内文件")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[e("img",{attrs:{src:"http://cdn.gulei.love/docs/WeChat931a24ab064d3f4d15c11fa7d44d0423.png",alt:"如图"}})]),s._v(" "),e("p",[s._v("我这里是将两个压缩包放在了容器内的"),e("code",[s._v("/opt")]),s._v(" 下面，然后进入ES容器，进入ES的"),e("code",[s._v("bin")]),s._v("文件夹执行下面的命令安装")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入容器 ")]),s._v("\ndocker "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it es /bin/bash\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装命令")]),s._v("\n/usr/share/elasticsearch/bin/elasticsearch-plugin "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" file:///opt/ingest-attachment-7.9.3.zip\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[e("img",{attrs:{src:"http://cdn.gulei.love/docs/WeChat95ea07a809f035be40f26711ae2d2936.png",alt:"如图"}})]),s._v(" "),e("p",[s._v("另外一个也是一样的。")]),s._v(" "),e("p",[s._v("最后执行如下命令看看两个插件是否都有了")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("/usr/share/elasticsearch/bin/elasticsearch-plugin list\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"http://cdn.gulei.love/docs/WeChat7dd42cc51c43493606f3699a2769beb1.png",alt:"1"}})]),s._v(" "),e("p",[e("strong",[s._v("最后退(exit)出容器，重启（docker restart es）ES即可。")])]),s._v(" "),e("h2",{attrs:{id:"补充-给es和kibana设置密码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#补充-给es和kibana设置密码"}},[s._v("#")]),s._v(" 补充：给es和kibana设置密码")]),s._v(" "),e("ol",[e("li",[s._v("进入es容器"),e("code",[s._v("docker exec -it es /bin/bash")]),s._v("，编辑elasticsearch.yml 文件，在最后添加内容：")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("http.cors.enabled: "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nhttp.cors.allow-origin: "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),s._v("\nhttp.cors.allow-headers: Authorization\nxpack.security.enabled: "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nxpack.security.transport.ssl.enabled: "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("重启后在此进入es容器，进入bin目录下执行")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./elasticsearch-setup-passwords interactive\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("中途输入 Y ，然后输入好多遍自定义的密码，我这边输入的是qwer1234，记好了，等会儿要用。\n"),e("img",{attrs:{src:"http://cdn.gulei.love/docs/WeChatd78b22a7d61e5c33b97e5eee88f6595c.png",alt:"看图"}})]),s._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[e("p",[s._v("退出、重启es后再次访问你的ES9200地址，就需要填账号密码了：账号elastic 密码 qwer1234")])]),s._v(" "),e("li",[e("p",[s._v("进入kibana容器，编辑kibana.yml文件，最下面添加账号密码即可")])])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意这里配置的是 kibana 哈")]),s._v("\nelasticsearch.username: "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kibana"')]),s._v("\nelasticsearch.password: "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"qwer1234"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("ol",{attrs:{start:"5"}},[e("li",[s._v("退出、重启kibana，然后访问Kibana5601地址，就需要填写账号密码了。")])]),s._v(" "),e("blockquote",[e("p",[e("strong",[s._v("特别注意点：")])]),s._v(" "),e("p",[e("strong",[s._v("登录Kibana时请使用账号：elastic   qwer1234")])]),s._v(" "),e("p",[e("strong",[s._v("如果使用： kibana qwer1234 那么登录成功后会403！！！！")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);