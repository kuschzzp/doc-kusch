---
title: LangSmith
date: 2025-07-14 16:22:25
permalink: /pages/4e83b4/
categories:
  - å¼ºå¤§çš„AI
  - Langchain
tags:
  - LangChain
author: 
  name: Mr.Kusch
  link: https://github.com/kuschzzp
---
### LangSmith

LangSmith æ˜¯ä¸æ¡†æ¶æ— å…³çš„ â€” å®ƒå¯ä»¥ä¸ LangChain çš„å¼€æºæ¡†æ¶ langchain å’Œ langgraph ä¸€èµ·ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨ã€‚
ç”¨äºè§‚æµ‹æ‰§è¡Œçš„è¿‡ç¨‹ã€‚

### ç¤ºä¾‹

```py
import os

from langchain.agents import initialize_agent, AgentType
from langchain.tools import tool
from langchain_community.chat_models import ChatTongyi
from langsmith import traceable
from pydantic import SecretStr

# âœ… ï¼šé…ç½® LangSmithï¼ˆå¯è§‚å¯Ÿæ€§å¹³å°ï¼‰
os.environ["LANGCHAIN_API_KEY"] = "xxxxxxxxxxxxx"
os.environ["LANGCHAIN_ENDPOINT"] = "https://api.smith.langchain.com"
os.environ["LANGCHAIN_PROJECT"] = "pr-prickly-xxxxxx-6"
os.environ["LANGSMITH_TRACING"] = "true"

# âœ… ç¬¬ 1 æ­¥ï¼šå®šä¹‰ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œå¹¶ç”¨ @tool è£…é¥°
@tool
def get_weather(city: str) -> str:
    """
    è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”æƒ…å†µï¼ˆæ¨¡æ‹Ÿï¼‰ã€‚
    """
    # å®é™…ä¸­è¿™é‡Œå¯ä»¥æ¥ç¬¬ä¸‰æ–¹å¤©æ°” APIï¼Œä¾‹å¦‚å’Œé£å¤©æ°”ã€ç™¾åº¦ã€é˜¿é‡Œç­‰
    return f"{city} ç›®å‰æ™´å¤©ï¼Œæ°”æ¸© 30Â°Cï¼Œæ¹¿åº¦ 60%"


# âœ… ç¬¬ 2 æ­¥ï¼šåŠ è½½è‡ªå®šä¹‰å·¥å…·åˆ—è¡¨
tools = [get_weather]  # å¤šä¸ªå‡½æ•°å¯ä»¥å†™æˆ [tool1, tool2, ...]

# æ‰“å°å·¥å…·ä¿¡æ¯
print("å·¥å…·åˆ—è¡¨ï¼š")
for tool in tools:
    print(f"- å·¥å…·åç§°: {tool.name}")
    print(f"  å·¥å…·æè¿°: {tool.description}")
    print(f"  å·¥å…·å‡½æ•°: {tool.func.__name__}")
    print(f"  å·¥å…·å‚æ•°: {tool.args}")
    print(f"  æ˜¯å¦ç›´æ¥è¿”å›: {tool.return_direct}")

# âœ… ç¬¬ 3 æ­¥ï¼šåˆå§‹åŒ–å¤§è¯­è¨€æ¨¡å‹ï¼ˆå¯ä»¥æ¢æˆä½ æ¥å…¥çš„æ¨¡å‹ï¼‰
llm = ChatTongyi(
    model="qwen-max",
    api_key=SecretStr("sk-xxxxxx"),
    model_kwargs={"temperature": 0.7}
)

# âœ… ç¬¬ 4 æ­¥ï¼šåˆå§‹åŒ– Agentï¼Œè®©å®ƒå¯ä»¥ä½¿ç”¨å·¥å…·
agent = initialize_agent(
    tools=tools,
    llm=llm,
    agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION,
    verbose=True  # è¾“å‡ºä¸­é—´è°ƒç”¨ä¿¡æ¯ï¼ˆæ¨èå¼€å¯ï¼‰
)

# âœ… ç¬¬ 5 æ­¥ï¼šæµ‹è¯•è¿è¡Œ
question = "åŒ—äº¬ä»Šå¤©çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"
response = agent.invoke(question)

print("ğŸ¤– AI å›ç­”ï¼š", response)
```