---
title: ToolsAndAgent
date: 2025-07-14 16:18:23
permalink: /pages/6920d7/
categories:
  - å¼ºå¤§çš„AI
  - Langchain
tags:
  - LangChain
author: 
  name: Mr.Kusch
  link: https://github.com/kuschzzp
---
### ToolsAndAgent

#### Tools

å®ƒä»¬å°è£…äº†ä¸€äº›å¯æ‰§è¡Œçš„æ“ä½œï¼ˆå¦‚è®¡ç®—ã€æœç´¢ã€ç¿»è¯‘ã€HTTP è°ƒç”¨ç­‰ï¼‰
å¯ä»¥åœ¨ Agent å†³ç­–ä¸­è°ƒç”¨ï¼Œè¾…åŠ©æ¨¡å‹â€œåŠ¨æ‰‹å¹²æ´»â€
æ¯ä¸ª Tool æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª å…·æœ‰æè¿°ã€è¾“å…¥ã€è¾“å‡ºçš„ Python å‡½æ•°åŒ…è£…å™¨

| ç±»å‹      | æ¥æº                        | ç¤ºä¾‹                                                 |
|---------|---------------------------|----------------------------------------------------|
| âœ… å†…ç½®å·¥å…·  | LangChain å†…éƒ¨å°è£…çš„å·¥å…·æ¨¡å—       | `"llm-math"`ã€`"serpapi"`ã€`"wikipedia"` ç­‰           |
| âœ… ç¬¬ä¸‰æ–¹å·¥å…· | å°è£… API / SDK çš„å·¥å…·ï¼ˆå¦‚æœç´¢ã€æ•°æ®åº“ï¼‰ | `ChatGPT Plugin`, `RequestsGetTool`, `ArxivTool` ç­‰ |
| âœ… è‡ªå®šä¹‰å·¥å…· | ä½ è‡ªå·±å®šä¹‰çš„ Python å‡½æ•°åŒ…è£…æˆ Tool  | æŸ¥è¯¢æ•°æ®åº“ã€è°ƒç”¨ ERPã€ç¿»è¯‘ç³»ç»Ÿç­‰                                 |

#### Agent

| **AgentType**                               | **æ ¸å¿ƒæœºåˆ¶**      | **é€‚ç”¨æ¨¡å‹**      | **é€‚ç”¨åœºæ™¯**       | **é€šä¹‰åƒé—®å…¼å®¹æ€§** | **ä¼˜ç‚¹**      | **ç¼ºç‚¹**          |
|---------------------------------------------|---------------|---------------|----------------|-------------|-------------|-----------------|
| ZERO_SHOT_REACT_DESCRIPTION                 | ReAct æ¨ç†      | é€šç”¨ LLM        | ç®€å•å·¥å…·è°ƒç”¨         | é«˜           | çµæ´»ã€é…ç½®ç®€å•     | å¤æ‚ä»»åŠ¡å¯èƒ½ä¸ç¨³å®š       |
| REACT_DOCSTORE                              | ReAct + æ–‡æ¡£æ£€ç´¢  | é€šç”¨ LLM + æ–‡æ¡£å­˜å‚¨ | çŸ¥è¯†å¯†é›†å‹ä»»åŠ¡        | ä¸­           | é€‚åˆçŸ¥è¯†æ£€ç´¢      | é…ç½®å¤æ‚ï¼Œä¾èµ–æ–‡æ¡£       |
| SELF_ASK_WITH_SEARCH                        | è‡ªæˆ‘æé—® + æœç´¢     | é€šç”¨ LLM + æœç´¢å·¥å…· | å¤æ‚é—®ç­”ï¼Œéœ€å¤–éƒ¨æ•°æ®     | ä¸­           | åˆ†è§£é—®é¢˜èƒ½åŠ›å¼º     | ä¾èµ–æœç´¢å·¥å…·ï¼Œé€Ÿåº¦æ…¢      |
| CONVERSATIONAL_REACT_DESCRIPTION            | ReAct + å¯¹è¯ä¸Šä¸‹æ–‡ | é€šç”¨ LLM        | å¯¹è¯å‹å·¥å…·è°ƒç”¨        | é«˜           | æ”¯æŒå¯¹è¯ï¼Œé€šç”¨æ€§å¥½   | å¤æ‚å¯¹è¯å¯èƒ½ä¸ç¨³å®š       |
| CHAT_ZERO_SHOT_REACT_DESCRIPTION            | ReAct + èŠå¤©ä¼˜åŒ–  | èŠå¤©æ¨¡å‹          | å•æ¬¡å·¥å…·è°ƒç”¨ï¼ŒèŠå¤©æ¨¡å‹ä¼˜åŒ–  | é«˜           | æç¤ºä¼˜åŒ–ï¼Œé€‚åˆèŠå¤©æ¨¡å‹ | ä¸ ZERO_SHOT å·®å¼‚å° |
| CHAT_CONVERSATIONAL_REACT_DESCRIPTION       | ReAct + å¯¹è¯ä¼˜åŒ–  | èŠå¤©æ¨¡å‹          | å¤šè½®å¯¹è¯ + å·¥å…·è°ƒç”¨    | é«˜           | å¯¹è¯èƒ½åŠ›å¼º       | é…ç½®ç¨å¤æ‚           |
| STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION | ç»“æ„åŒ–æç¤º + ReAct | èŠå¤©æ¨¡å‹          | å¤æ‚å·¥å…·è°ƒç”¨ï¼Œå•æ¬¡æˆ–ç®€å•å¯¹è¯ | ä¸­           | æ”¯æŒå¤šè¾“å…¥å·¥å…·     | æç¤ºè®¾è®¡å¤æ‚          |
| OPENAI_FUNCTIONS                            | OpenAI å‡½æ•°è°ƒç”¨   | OpenAI æ¨¡å‹     | é«˜æ•ˆå·¥å…·è°ƒç”¨         | ä¸å…¼å®¹         | ç²¾å‡†ã€é«˜æ•ˆ       | ä»…é™ OpenAI æ¨¡å‹    |
| OPENAI_MULTI_FUNCTIONS                      | OpenAI å¤šå‡½æ•°è°ƒç”¨  | OpenAI æ¨¡å‹     | å¤šå·¥å…·åŒæ—¶è°ƒç”¨        | ä¸å…¼å®¹         | æ”¯æŒå¤šå·¥å…·è°ƒç”¨     | ä»…é™ OpenAIï¼Œé…ç½®å¤æ‚  |

å¯¹äºé€šä¹‰åƒé—®ï¼Œä¼˜å…ˆ `ZERO_SHOT_REACT_DESCRIPTION` æˆ– `CHAT_CONVERSATIONAL_REACT_DESCRIPTION`ï¼ˆéœ€å¯¹è¯æ—¶ï¼‰ã€‚

### ç¤ºä¾‹

```py
from langchain.agents import initialize_agent, AgentType
from langchain.tools import tool
from langchain_community.agent_toolkits.load_tools import load_tools
from langchain_community.chat_models import ChatTongyi
from pydantic import SecretStr

# âœ… ç¬¬ 1 æ­¥ï¼šå®šä¹‰ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œå¹¶ç”¨ @tool è£…é¥°
@tool
def get_weather(city: str) -> str:
    """
    è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”æƒ…å†µï¼ˆæ¨¡æ‹Ÿï¼‰ã€‚
    """
    # å®é™…ä¸­è¿™é‡Œå¯ä»¥æ¥ç¬¬ä¸‰æ–¹å¤©æ°” APIï¼Œä¾‹å¦‚å’Œé£å¤©æ°”ã€ç™¾åº¦ã€é˜¿é‡Œç­‰
    return f"{city} ç›®å‰æ™´å¤©ï¼Œæ°”æ¸© 30Â°Cï¼Œæ¹¿åº¦ 60%"


# âœ… ç¬¬ 2 æ­¥ï¼šåŠ è½½è‡ªå®šä¹‰å·¥å…·åˆ—è¡¨
tools = [get_weather]  # å¤šä¸ªå‡½æ•°å¯ä»¥å†™æˆ [tool1, tool2, ...]

# æ‰“å°å·¥å…·ä¿¡æ¯
print("å·¥å…·åˆ—è¡¨ï¼š")
for tool in tools:
    print(f"- å·¥å…·åç§°: {tool.name}")
    print(f"  å·¥å…·æè¿°: {tool.description}")
    print(f"  å·¥å…·å‡½æ•°: {tool.func.__name__}")
    print(f"  å·¥å…·å‚æ•°: {tool.args}")
    print(f"  æ˜¯å¦ç›´æ¥è¿”å›: {tool.return_direct}")

# âœ… ç¬¬ 3 æ­¥ï¼šåˆå§‹åŒ–å¤§è¯­è¨€æ¨¡å‹ï¼ˆå¯ä»¥æ¢æˆä½ æ¥å…¥çš„æ¨¡å‹ï¼‰
llm = ChatTongyi(
    model="qwen-max",
    api_key=SecretStr("sk-xxxxxx"),
    model_kwargs={"temperature": 0.7}
)

# âœ… ç¬¬ 4 æ­¥ï¼šåˆå§‹åŒ– Agentï¼Œè®©å®ƒå¯ä»¥ä½¿ç”¨å·¥å…·
agent = initialize_agent(
    tools=tools,
    llm=llm,
    agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION,
    verbose=True  # è¾“å‡ºä¸­é—´è°ƒç”¨ä¿¡æ¯ï¼ˆæ¨èå¼€å¯ï¼‰
)

# âœ… ç¬¬ 5 æ­¥ï¼šæµ‹è¯•è¿è¡Œ
question = "åŒ—äº¬ä»Šå¤©çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"
response = agent.invoke(question)

print("ğŸ¤– AI å›ç­”ï¼š", response)
```