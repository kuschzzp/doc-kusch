---
title: å¤šæœºå™¨SSHå…å¯†
date: 2025-07-31 16:31:25
permalink: /pages/7a7624/
categories:
  - éƒ¨ç½²ä¸è¿ç»´
  - Linuxå¸¸ç”¨æ“ä½œ
tags:
  - ssh
author: 
  name: Mr.Kusch
  link: https://github.com/kuschzzp
---


## ğŸ˜ å¤šæœºå™¨SSHå…å¯†

1å°å…¬ç½‘æœºå™¨ + Nå†…ç½‘äº’é€šæœºå™¨ ä¹‹é—´é…ç½®SSHå…å¯†ã€‚

**æœºå™¨éƒ½å…³é—­äº†å¯†ç ç™»å½•ï¼Œä½¿ç”¨å¯†é’¥ç™»å½•ï¼Œå¹¶ä¸”SSHç«¯å£éƒ½æ˜¯ 2002ã€‚**

æœ€ç»ˆæƒ³å®ç° å…¬ç½‘æœºå™¨ä¸Šä½¿ç”¨ `ssh 172.16.11.217` å’Œ `ssh 172.16.11.214` ä¸è¾“å…¥å¯†ç ç›´æ¥ç™»å½•ã€‚

è°ƒè¯•æœºå™¨ä¿¡æ¯ï¼š
```
æœºå™¨1:
å…¬ï¼š118.*.*.156
å†…ï¼š172.16.11.218

æœºå™¨2:
å†…ï¼š172.16.11.217

æœºå™¨3:
å†…ï¼š172.16.11.214
```

## âœ… æ“ä½œæ­¥éª¤ï¼ˆåœ¨æœºå™¨1ä¸Šå®Œæˆï¼‰

### ç¬¬ä¸€æ­¥ï¼šåœ¨æœºå™¨1ä¸Šç”Ÿæˆ SSH å¯†é’¥å¯¹

```bash
ssh-keygen -t rsa -b 4096 -f ~/.ssh/id_rsa -N ""
```

> æ³¨æ„ï¼šä¸è¦è¦†ç›–å·²æœ‰å¯†é’¥ã€‚å¦‚æœæç¤ºæ–‡ä»¶å·²å­˜åœ¨ï¼Œå¯ä»¥æ¢ä¸ªåå­—ï¼Œæ¯”å¦‚ `~/.ssh/id_rsa_ai`

### ç¬¬äºŒæ­¥ï¼šå°†å…¬é’¥æ‹·è´åˆ°æœºå™¨2 å’Œ æœºå™¨3

#### ï¼ˆ1ï¼‰å°†å…¬é’¥æ–‡ä»¶æ‹·è´åˆ°æœºå™¨2

```bash
scp -P 2002 -i /root/dmpem/ai-test.pem ~/.ssh/id_rsa.pub root@172.16.11.217:/tmp/machine1.pub
```

ç„¶åç™»å½•æœºå™¨2ï¼š

```bash
ssh -p 2002 -i /root/dmpem/ai-test.pem root@172.16.11.217
```

æ‰§è¡Œï¼š

```bash
mkdir -p ~/.ssh
cat /tmp/machine1.pub >> ~/.ssh/authorized_keys
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys
rm /tmp/machine1.pub
exit
```

#### ï¼ˆ2ï¼‰å°†å…¬é’¥æ–‡ä»¶æ‹·è´åˆ°æœºå™¨3

```bash
scp -P 2002 -i /root/dmpem/ai-test.pem ~/.ssh/id_rsa.pub root@172.16.11.214:/tmp/machine1.pub
```

ç„¶åç™»å½•æœºå™¨3ï¼š

```bash
ssh -p 2002 -i /root/dmpem/ai-test.pem root@172.16.11.214
```

æ‰§è¡Œï¼š

```bash
mkdir -p ~/.ssh
cat /tmp/machine1.pub >> ~/.ssh/authorized_keys
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys
rm /tmp/machine1.pub
exit
```

### ç¬¬ä¸‰æ­¥ï¼šåœ¨æœºå™¨1ä¸Šæµ‹è¯•å…å¯†ç™»å½•

å›åˆ°æœºå™¨1ï¼š

```bash
ssh -p 2002 root@172.16.11.217   # åº”è¯¥ä¸å†è¦æ±‚ pem æˆ–å¯†ç 
ssh -p 2002 root@172.16.11.214   # åŒæ ·æ— éœ€å¯†ç 
```

### ç¬¬å››æ­¥ï¼šè®¾ç½® SSH ç®€åŒ–é…ç½®ï¼ˆåˆ«åï¼‰

ç¼–è¾‘æœºå™¨1çš„é…ç½®æ–‡ä»¶ï¼š

```bash
vim ~/.ssh/config
```

æ·»åŠ ä»¥ä¸‹å†…å®¹(machine2ã€machine3æ˜¯è‡ªå®šä¹‰åå­—)ï¼š

```ssh
Host machine2
    HostName 172.16.11.217
    Port 2002
    User root
    IdentityFile ~/.ssh/id_rsa

Host machine3
    HostName 172.16.11.214
    Port 2002
    User root
    IdentityFile ~/.ssh/id_rsa
```

ä¿å­˜åï¼Œä½ å°±å¯ä»¥ç›´æ¥ï¼š

```bash
ssh machine2
ssh machine3
```

## âœ… å®Œæˆæ•ˆæœ

ç°åœ¨ä½ åœ¨æœºå™¨1ä¸Šï¼š

* æ‰§è¡Œ `ssh root@172.16.11.217` / `ssh machine2` â†’ **å…å¯†ç™»å½•æœºå™¨2**
* æ‰§è¡Œ `ssh root@172.16.11.214` / `ssh machine3` â†’ **å…å¯†ç™»å½•æœºå™¨3**