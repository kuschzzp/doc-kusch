---
title: 文档图文解析带来的检索问题
date: 2025-06-18 10:26:24
permalink: /pages/56c77f/
categories:
  - 整点儿AI
  - RAG
tags:
  - AI
author: 
  name: Mr.Kusch
  link: https://github.com/kuschzzp
---
### 文档图文解析带来的检索问题

目前RAG系统解析文档中的图文，已经实现了文本制作分块、图片经大模型描述后结合上下文制作分块。但是由于图片的描述是基于大模型的生成，就可能会导致
在检索时，用户提出的问题在人类看来，文本分块内容已经可以很好的回答问题。  
但是在实际情况下，召回相似度匹配时，图片分块的内容相似度可能大于 目标文本分块的内容相似度，导致回答结果的不准确。

### 思考解决方案

1. 平衡多模态分块

将文本和图片描述分别存储在独立的向量存储中，检索时从每个存储中固定检索一定数量的块。例如，检索前2个文本块和前2个图片块（总共4个）。

2. 优化图片描述生成

由于当前图片描述可能过于冗长或包含与查询高度匹配的关键词，导致在检索中被优先考虑，即使它不相关，
那就需要去调整大模型的提示词（Prompt），让其生成更精炼的描述，专注于图片的核心信息。例如，强调图片中的关键元素而非完整叙述。  
例如，对于一张图表，描述可以是“图表显示了2023年销售额增长趋势”而非详细的数值列表

3. 修改RAG提示词

通过调整生成回答的提示词，引导其在处理多模态上下文时更倾向于使用文本信息。  
例如： “回答问题时，尽可能优先使用文本块中的信息，只有当文本不足以回答时，才使用图片描述。 ”  
这是成本最低的方案了。

4. 引入 Re-Ranker 模型

在检索后，使用一个 Re-Ranker 模型对检索结果进行二次排序。





