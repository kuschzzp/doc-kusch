---
title: SD之图片局部重绘
date: 2024-12-28 22:32:13
permalink: /pages/9b824f/
categories:
  - 整点儿AI
  - 绘画实战
tags:
  - 
author: 
  name: Mr.Kusch
  link: https://github.com/kuschzzp
---
## SD 图生图之局部重绘

### 需要预先了解的内容

#### 预处理方式

1. 填充：将蒙版内容模糊，然后根据提示词填充到原图中。  
2. 原图：按照原图风格进行结合提示词生成图片。`更适合较小幅度的重绘，不改变原图风格`  
3. 潜在噪声：将蒙版以噪点填充，然后根据提示词生成图片。`更适合较大幅度的重绘，改变原图风格，生成与原图不相关的内容`  
4. 空白潜在空间：将蒙版以色块填充，然后根据提示词生成图片。  


#### 重绘尺寸

1. 全图：根据整图比例重绘，`绘制的内容会比较符合整张图的比例`
2. 蒙版尺寸：【填充半径】，半径越小重绘内容越丰富，细节越多。`如果蒙版区域小，可以调大这个数值，这样不易出现画中画，从而导致图片很奇怪`

### 开始操作

1. 选择图生图，然后选择局部重绘，上传图片。
   ![1](https://img.superkusch.fun/docs/202412282308799.png)

2. 选择上图`4`标记的按钮，画出你要重绘的区域，我这边涂抹的的项链，然后在正面提示词中填写`green pearl necklace,`，点击生成，看效果。记得点一下下方长宽部分的尺子图标，让SD读取图片长宽信息，当然你也可以手动输入。
   ![2](https://img.superkusch.fun/docs/00018-2302176144.png)

> 如果觉得重绘的不好，可以根据需要修改提示词，并参考上方说明修改重绘尺寸、预处理方式，多次尝试出最佳组合。


## 图生图之 Inpaint Anything 插件

为什么我不在上面重绘衣服呢？ 因为我懒，懒得去涂抹那么大的一部分衣服，所以我选择了`Inpaint Anything`插件，这个插件可以帮助我们快速的修改图片中的物体。


### 操作步骤

1. 选择`Inpaint Anything`插件，上传图片，点击 `Run Segment Anything`按钮，然后会出来一张和色彩分明的图，还是和上面图生图一样，但是这次我不需要全部涂抹，只需要稍微涂几个点，再点击`Create Mask`蒙版就好了 。
   ![3](https://img.superkusch.fun/docs/202412290004519.png)
2. 然后填写提示词，点击生成，看效果。
   ![4](https://img.superkusch.fun/docs/file.png)

> 如果觉得重绘的不好，可以使用第四个标签`Mask only`，生成一个Mask，保存下来，然后去图生图使用遮罩蒙版的方式进行局部重绘,操作和上面图生图都差不多。

