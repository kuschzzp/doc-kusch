---
title: é‡å†™equalså’ŒhashCodeçš„å¿…è¦æ€§
date: 2023-05-14 17:38:07
permalink: /pages/8ac218/
categories:
  - Java
  - JavaåŸºç¡€
tags:
  - éšç¬”
author: 
  name: Mr.Kusch
  link: https://github.com/kuschzzp
---
## é‡å†™equals()å’ŒhashCode()æ–¹æ³•

### æ —å­ğŸŒ°

é€šå¸¸ä¸é‡å†™ä¸Šè¿°ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªç±»å¤§è‡´æ˜¯è¿™æ ·çš„

```java
import java.util.Objects;

public class Goods {

    public String id;
    public String name;
    public String path;
    public Integer price;


    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPath() {
        return path;
    }

    public void setPath(String path) {
        this.path = path;
    }

    public Integer getPrice() {
        return price;
    }

    public void setPrice(Integer price) {
        this.price = price;
    }

    @Override
    public String toString() {
        return "Goods{" +
                "id='" + id + '\'' +
                ", name='" + name + '\'' +
                ", path='" + path + '\'' +
                ", price=" + price +
                '}';
    }
}

```

æ­¤æ—¶è¿è¡Œä¸‹é¢è¿™æ®µä»£ç ï¼š

```java
public static void main(String[] args) {
    Goods goods = new Goods();
    goods.setId("1");
    goods.setName("1");
    goods.setPath("1");
    goods.setPrice(1);

    Goods goods1 = new Goods();
    goods1.setId("1");
    goods1.setName("1");
    goods1.setPath("1");
    goods1.setPrice(1);

    System.out.println("goods.equals(goods1)ï¼š" + goods.equals(goods1));
    System.out.println("goods.hashCode() == goods1.hashCode()ï¼š" + (goods.hashCode() == goods1.hashCode()));


    Set<Goods> set = new HashSet<>();
    set.add(goods);
    set.add(goods1);
    System.out.println("è¾“å‡ºsetå…ƒç´ ");
    set.forEach(System.out::println);
}
```

è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š

```java
goods.equals(goods1)ï¼šfalse
goods.hashCode() == goods1.hashCode()ï¼šfalse
è¾“å‡ºsetå…ƒç´ 
Goods{id='1', name='1', path='1', price=1}
Goods{id='1', name='1', path='1', price=1}

Process finished with exit code 0
```

å¯è§ï¼Œæˆ‘ä»¬ç»™ä¸€ä¸ªå¯¹è±¡è®¾ç½®çš„æ¯ä¸ªå±æ€§éƒ½ç›¸åŒï¼ŒæœŸæœ›å°±æ˜¯ **è¿™ä¸¤ä¸ªå¯¹è±¡æ˜¯ä¸€æ ·çš„** ï¼Œ
ä½†æ˜¯æ­¤æ—¶çš„ç»“æœå¹¶ä¸å°½äººæ„ï¼Œé‚£ä¹ˆæ­¤æ—¶è¦æƒ³å®ç°éœ€æ±‚ï¼Œå°±éœ€è¦å»é‡å†™ **equals()** æ–¹æ³•ï¼Œ
æˆ‘ä»¬åœ¨ä¸Šè¿°ç±»ä¸­æ·»åŠ ä¸‹é¢è¿™æ®µä»£ç ï¼Œé‡å†™å…¶ **equal()** æ–¹æ³•ã€‚

```java
@Override
public boolean equals(Object o) {
    if (this == o) {
        return true;
    }
    if (o == null || getClass() != o.getClass()) {
        return false;
    }
    Goods goods = (Goods) o;
    return Objects.equals(id, goods.id)
            && Objects.equals(name, goods.name)
            && Objects.equals(path, goods.path)
            && Objects.equals(price, goods.price);
}
```

ä»£ç è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œæˆ‘ä»¬åˆ¤æ–­è¿™ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ä¸€æ ·ï¼Œé‚£å°±æ˜¯è¦å»åˆ¤æ–­ä»–ä»¬çš„æ¯ä¸ªå€¼æ˜¯ä¸æ˜¯ä¸€æ ·çš„ã€‚**(æ­¤æ—¶æ²¡æœ‰é‡å†™hashCode()æ–¹æ³•)**

æ¥ä¸‹æ¥åœ¨æ­¤è¿è¡Œä¸Šè¿°mainæ–¹æ³•å¯å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š

```java
goods.equals(goods1)ï¼štrue
goods.hashCode() == goods1.hashCode()ï¼šfalse
è¾“å‡ºsetå…ƒç´ 
Goods{id='1', name='1', path='1', price=1}
Goods{id='1', name='1', path='1', price=1}

Process finished with exit code 0
```

æ­¤æ—¶å¯ä»¥çœ‹åˆ°ï¼Œ**equals()** æ¯”è¾ƒè¿”å›trueäº†ï¼Œè¿™å·²ç»è¾¾åˆ°äº†æˆ‘ä»¬çš„é¢„æœŸç»“æœäº†ï¼Œå¥½åƒä¸é‡å†™ **hashCode()** ä¹Ÿæ²¡ä»€ä¹ˆå…³ç³»ï¼Œç¡®å®ï¼Œå¦‚æœä½ çš„å¯¹è±¡ä»…ä»…æ˜¯
è¿™ä¹ˆä½¿ç”¨çš„ï¼Œä¸éœ€è¦åƒ**main**æ–¹æ³•ä¸­ååŠæ®µä¸€æ ·æ”¾è¿›é›†åˆè¿›è¡Œæ“ä½œï¼Œé‚£é‡ä¸é‡å†™ **hashCode()** å¯¹ä½ æ¥è¯´é—®é¢˜ä¸å¤§ã€‚ä½†æ˜¯ä¸€æ—¦éœ€è¦æ”¾è¿›é›†åˆäº†ï¼Œç”¨**set**ä¸¾ä¾‹å­ï¼Œ
**main**æ–¹æ³•ä¸­ï¼ŒæŠŠä¸¤ä¸ªè®¤ä¸ºä¸€æ ·çš„å¯¹è±¡æ”¾è¿›**set**ä¸­ï¼Œè¾“å‡ºæ—¶ï¼Œå´è¾“å‡ºäº†ä¸¤ä¸ªï¼Œè¯´æ˜**set**é›†åˆå¹¶ä¸è®¤ä¸ºå®ƒä»¬æ˜¯ä¸€æ ·çš„å¯¹è±¡ï¼Œé‚£ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ
ä¸‹é¢æ‰¾ä¸€ä¸‹**set**é›†åˆçš„**add**æ–¹æ³•çœ‹ä¸€ä¸‹ï¼š

![å›¾1](https://img.superkusch.fun/docs/WeChatb5053bd79f6391bd75651cfbe84c2726.png)

å¯è§å®ƒæŠŠæˆ‘ä»¬çš„å¯¹è±¡ä½œä¸ºkeyå­˜å…¥äº†mapä¸­ï¼Œå€¼ **PRESENT** æ˜¯ä¸€ä¸ªè™šæ‹Ÿå€¼ï¼Œä¸ç”¨ç®¡ã€‚æ¥ç€å¾€ä¸‹èµ°

![2](https://img.superkusch.fun/docs/WeChat4fd21a5b8cc44f17cf3cc363913c5629.png)

å¯è§ **hash(key)** æ–¹æ³•å°±æ˜¯å°†æˆ‘ä»¬çš„å¯¹è±¡è¿›è¡Œhashè®¡ç®—ï¼Œå†è·Ÿhash()æ–¹æ³•

![3](https://img.superkusch.fun/docs/WeChate59c29d1cf96abf920724507cf1d5248.png)

åˆ°è¿™é‡Œåº”è¯¥å°±æ˜ç¡®äº†ï¼Œç”±äºæˆ‘ä»¬æ²¡æœ‰é‡å†™ **hashCode()** æ–¹æ³•å¯¼è‡´ **goods.hashCode() == goods1.hashCode()** ä¸ºfalseï¼Œæ‰€ä»¥è¢«å½“æˆäº†ä¸¤ä¸ªå¯¹è±¡ã€‚
æœ€åå§é‡å†™çš„ **hashCode()** æ–¹æ³•è¡¥ä¸Šçœ‹çœ‹ç»“æœï¼š

```java
@Override
public int hashCode() {
    return Objects.hash(id, name, path, price);
}
```

è¿è¡Œç»“æœï¼š

```java
goods.equals(goods1)ï¼štrue
goods.hashCode() == goods1.hashCode()ï¼štrue
è¾“å‡ºsetå…ƒç´ 
Goods{id='1', name='1', path='1', price=1}

Process finished with exit code 0
```

å¯è§ä¸€åˆ‡éƒ½ç¬¦åˆé¢„æœŸäº†ã€‚

### çœæµä¸€å¥è¯

å¦‚æœä½ ä¸ç¡®å®šå¯¹è±¡çš„ä½¿ç”¨åœºæ™¯ï¼Œé‚£é‡å†™equals()å¿…é¡»é‡å†™hashCode()æ–¹æ³•ï¼
